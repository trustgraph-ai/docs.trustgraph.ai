<div style="border: 2px solid {{ include.border_color }}; background-color: {{ include.bg_color }}; padding: 5px 20px 20px 20px; margin: 20px 0; border-radius: 8px;">

<h2>{{ include.section_title }}</h2>

<div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
{% assign pages_filtered = site.pages | sort: "guide_category_order" %}
{% for guide in pages_filtered %}
{% if guide.guide_category contains include.category_name %}
<div style="border: 1px solid {{ include.card_border_color }}; background-color: {{ include.card_bg_color }}; padding: 0; border-radius: 4px; flex: 1 1 200px; overflow: hidden;">
<a href="{{ guide.url }}" style="text-decoration: none; color: inherit; display: block;">
{% if guide.guide_banner %}
{% if guide.url contains '.html' %}
  {% assign banner_base = guide.url | replace: 'index.html', '' | split: '/' | pop | join: '/' | append: '/' %}
{% else %}
  {% assign banner_base = guide.url | append: '/' %}
{% endif %}
<div style="width: 100%; height: 180px; background-image: url('{{ banner_base }}{{ guide.guide_banner }}'); background-size: cover; background-position: center; position: relative;">
<div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, rgba(0,0,0,0.85), rgba(0,0,0,0.4)); padding: 15px;">
<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
{% if guide.guide_emoji %}<span style="font-size: 2em; filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.8));">{{ guide.guide_emoji }}</span>{% endif %}
<strong style="font-size: 1.1em; color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.8);">{{ guide.title }}</strong>
</div>
<div style="font-size: 0.85em; color: {{ include.accent_color }}; text-shadow: 1px 1px 3px rgba(0,0,0,0.8);">
{% if guide.guide_difficulty %}{{ guide.guide_difficulty }}{% endif %}{% if guide.guide_difficulty and guide.guide_time %} • {% endif %}{% if guide.guide_time %}{{ guide.guide_time }}{% endif %}
</div>
</div>
</div>
{% else %}
<div style="padding: 10px 15px 0 15px;">
<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
{% if guide.guide_emoji %}<span style="font-size: 2em;">{{ guide.guide_emoji }}</span>{% endif %}
<strong style="font-size: 1.1em;">{{ guide.title }}</strong>
</div>
<div style="font-size: 0.85em; color: {{ include.accent_color }};">
{% if guide.guide_difficulty %}{{ guide.guide_difficulty }}{% endif %}{% if guide.guide_difficulty and guide.guide_time %} • {% endif %}{% if guide.guide_time %}{{ guide.guide_time }}{% endif %}
</div>
</div>
{% endif %}
<div style="padding: 10px 15px;">
{% if guide.guide_description %}<div style="font-size: 0.9em; margin-top: 8px; opacity: 0.9;">{{ guide.guide_description }}</div>{% endif %}
{% if guide.guide_labels %}<div style="display: flex; flex-wrap: wrap; gap: 5px; margin-top: 10px;">{% for label in guide.guide_labels %}<span style="font-size: 0.75em; padding: 2px 8px; background-color: {{ include.label_bg_color }}; border: 1px solid {{ include.card_border_color }}; border-radius: 3px; white-space: nowrap;">{{ label }}</span>{% endfor %}</div>{% endif %}
</div>
</a>
</div>
{% endif %}
{% endfor %}
</div>

</div>
